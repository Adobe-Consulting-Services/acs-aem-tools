/*! ng-dialog - v0.3.7 (https://github.com/likeastore/ngDialog) */
!function(a,b){"undefined"!=typeof module&&module.exports?module.exports=b(require("angular")):"function"==typeof define&&define.amd?define(["angular"],b):b(a.angular)}(this,function(a){"use strict";var b=a.module("ngDialog",[]),c=a.element,d=a.isDefined,e=(document.body||document.documentElement).style,f=d(e.animation)||d(e.WebkitAnimation)||d(e.MozAnimation)||d(e.MsAnimation)||d(e.OAnimation),g="animationend webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend",h=!1;b.provider("ngDialog",function(){var b=this.defaults={className:"ngdialog-theme-default",plain:!1,showClose:!0,closeByDocument:!0,closeByEscape:!0,closeByNavigation:!1,appendTo:!1,preCloseCallback:!1,overlay:!0,cache:!0};this.setForceBodyReload=function(a){h=a||!1},this.setDefaults=function(c){a.extend(b,c)};var d,e=0,i=0,j={};this.$get=["$document","$templateCache","$compile","$q","$http","$rootScope","$timeout","$window","$controller",function(k,l,m,n,o,p,q,r,s){var t=k.find("body");h&&p.$on("$locationChangeSuccess",function(){t=k.find("body")});var u={onDocumentKeydown:function(a){27===a.keyCode&&v.close("$escape")},setBodyPadding:function(a){var b=parseInt(t.css("padding-right")||0,10);t.css("padding-right",b+a+"px"),t.data("ng-dialog-original-padding",b)},resetBodyPadding:function(){var a=t.data("ng-dialog-original-padding");a?t.css("padding-right",a+"px"):t.css("padding-right","")},performCloseDialog:function(b,c){var e=b.attr("id");if("undefined"!=typeof r.Hammer){var h=a.element(b).scope().hammerTime;h.off("tap",d),h.destroy&&h.destroy(),delete b.scope().hammerTime}else b.unbind("click");1===i&&t.unbind("keydown"),b.hasClass("ngdialog-closing")||(i-=1),p.$broadcast("ngDialog.closing",b),f?b.unbind(g).bind(g,function(){b.scope().$destroy(),b.remove(),0===i&&(t.removeClass("ngdialog-open"),u.resetBodyPadding()),p.$broadcast("ngDialog.closed",b)}).addClass("ngdialog-closing"):(b.scope().$destroy(),b.remove(),0===i&&(t.removeClass("ngdialog-open"),u.resetBodyPadding()),p.$broadcast("ngDialog.closed",b)),j[e]&&(j[e].resolve({id:e,value:c,$dialog:b,remainingDialogs:i}),delete j[e])},closeDialog:function(b,c){var d=b.data("$ngDialogPreCloseCallback");if(d&&a.isFunction(d)){var e=d.call(b,c);a.isObject(e)?e.closePromise?e.closePromise.then(function(){u.performCloseDialog(b,c)}):e.then(function(){u.performCloseDialog(b,c)},function(){}):e!==!1&&u.performCloseDialog(b,c)}else u.performCloseDialog(b,c)}},v={open:function(f){function g(a,b){return o.get(a,b||{}).then(function(a){return a.data||""})}function h(b){return b?a.isString(b)&&w.plain?b:"boolean"!=typeof w.cache||w.cache?l.get(b)||g(b,{cache:!0}):g(b,{cache:!1}):"Empty template"}var k=this,w=a.copy(b);f=f||{},a.extend(w,f),e+=1,k.latestID="ngdialog"+e;var x;j[k.latestID]=x=n.defer();var y,z,A=a.isObject(w.scope)?w.scope.$new():p.$new();return n.when(h(w.template||w.templateUrl)).then(function(b){if(l.put(w.template||w.templateUrl,b),w.showClose&&(b+='<div class="ngdialog-close"></div>'),k.$result=y=c('<div id="ngdialog'+e+'" class="ngdialog"></div>'),y.html(w.overlay?'<div class="ngdialog-overlay"></div><div class="ngdialog-content">'+b+"</div>":'<div class="ngdialog-content">'+b+"</div>"),w.data&&a.isString(w.data)){var f=w.data.replace(/^\s*/,"")[0];A.ngDialogData="{"===f||"["===f?a.fromJson(w.data):w.data}else w.data&&a.isObject(w.data)&&(A.ngDialogData=w.data);if(w.controller&&(a.isString(w.controller)||a.isArray(w.controller)||a.isFunction(w.controller))){var g=s(w.controller,{$scope:A,$element:y});y.data("$ngDialogControllerController",g)}if(w.className&&y.addClass(w.className),z=w.appendTo&&a.isString(w.appendTo)?a.element(document.querySelector(w.appendTo)):t,w.preCloseCallback){var h;a.isFunction(w.preCloseCallback)?h=w.preCloseCallback:a.isString(w.preCloseCallback)&&A&&(a.isFunction(A[w.preCloseCallback])?h=A[w.preCloseCallback]:A.$parent&&a.isFunction(A.$parent[w.preCloseCallback])?h=A.$parent[w.preCloseCallback]:p&&a.isFunction(p[w.preCloseCallback])&&(h=p[w.preCloseCallback])),h&&y.data("$ngDialogPreCloseCallback",h)}if(A.closeThisDialog=function(a){u.closeDialog(y,a)},q(function(){m(y)(A);var a=r.innerWidth-t.prop("clientWidth");t.addClass("ngdialog-open");var b=a-(r.innerWidth-t.prop("clientWidth"));b>0&&u.setBodyPadding(b),z.append(y),w.name?p.$broadcast("ngDialog.opened",{dialog:y,name:w.name}):p.$broadcast("ngDialog.opened",y)}),w.closeByEscape&&t.bind("keydown",u.onDocumentKeydown),w.closeByNavigation&&p.$on("$locationChangeSuccess",function(){u.closeDialog(y)}),d=function(a){var b=w.closeByDocument?c(a.target).hasClass("ngdialog-overlay"):!1,d=c(a.target).hasClass("ngdialog-close");(b||d)&&v.close(y.attr("id"),d?"$closeButton":"$document")},"undefined"!=typeof r.Hammer){var j=A.hammerTime=r.Hammer(y[0]);j.on("tap",d)}else y.bind("click",d);return i+=1,v}),{id:"ngdialog"+e,closePromise:x.promise,close:function(a){u.closeDialog(y,a)}}},openConfirm:function(b){var d=n.defer(),e={closeByEscape:!1,closeByDocument:!1};a.extend(e,b),e.scope=a.isObject(e.scope)?e.scope.$new():p.$new(),e.scope.confirm=function(a){d.resolve(a);var b=c(document.getElementById(f.id));u.performCloseDialog(b,a)};var f=v.open(e);return f.closePromise.then(function(a){return a?d.reject(a.value):d.reject()}),d.promise},close:function(a,b){var d=c(document.getElementById(a));return d.length?u.closeDialog(d,b):v.closeAll(b),v},closeAll:function(b){var d=document.querySelectorAll(".ngdialog");a.forEach(d,function(a){u.closeDialog(c(a),b)})},getDefaults:function(){return b}};return v}]}),b.directive("ngDialog",["ngDialog",function(b){return{restrict:"A",scope:{ngDialogScope:"="},link:function(c,d,e){d.on("click",function(d){d.preventDefault();var f=a.isDefined(c.ngDialogScope)?c.ngDialogScope:"noScope";a.isDefined(e.ngDialogClosePrevious)&&b.close(e.ngDialogClosePrevious);var g=b.getDefaults();b.open({template:e.ngDialog,className:e.ngDialogClass||g.className,controller:e.ngDialogController,scope:f,data:e.ngDialogData,showClose:"false"===e.ngDialogShowClose?!1:"true"===e.ngDialogShowClose?!0:g.showClose,closeByDocument:"false"===e.ngDialogCloseByDocument?!1:"true"===e.ngDialogCloseByDocument?!0:g.closeByDocument,closeByEscape:"false"===e.ngDialogCloseByEscape?!1:"true"===e.ngDialogCloseByEscape?!0:g.closeByEscape,preCloseCallback:e.ngDialogPreCloseCallback||g.preCloseCallback})})}}}])});